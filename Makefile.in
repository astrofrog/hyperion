FC = @serial_fc@ @extra_serial@
FCMPI = @mpi_fc@ @extra_mpi@

COMMON = 	fortranlib/src/base_types.f90 \
		fortranlib/src/lib_messages.f90 \
		fortranlib/src/lib_io.f90 \
		fortranlib/src/lib_version.f90 \
		fortranlib/src/lib_algebra.f90 \
		fortranlib/src/lib_conf.f90 \
		fortranlib/src/lib_array.f90 \
		fortranlib/src/lib_statistics.f90 \
		fortranlib/src/lib_random.f90 \
		fortranlib/src/lib_hdf5.f90 \
		fortranlib/src/lib_constants.f90 \
		fortranlib/src/type_angle3d.f90 \
		fortranlib/src/type_vector3d.f90 \
		fortranlib/src/type_stokes.f90 \
		fortranlib/src/type_pdf.f90

OBJECTS_CAR_SER =	src/mpi/mpi_core_nompi.f90 \
			fortranlib/src/@posix_module_serial@.f90 \
			fortranlib/src/base_types.f90 \
			fortranlib/src/lib_messages.f90 \
			fortranlib/src/lib_io.f90 \
			fortranlib/src/lib_version.f90 \
			fortranlib/src/lib_algebra.f90 \
			fortranlib/src/lib_conf.f90 \
			fortranlib/src/lib_array.f90 \
			fortranlib/src/lib_statistics.f90 \
			fortranlib/src/lib_constants.f90 \
			fortranlib/src/type_angle3d.f90 \
			fortranlib/src/type_vector3d.f90 \
			fortranlib/src/type_stokes.f90 \
			fortranlib/src/type_pdf.f90
			src/core/core_lib.f90 \
			src/main/counters.f90 \
			src/grid/type_grid_cartesian_3d.f90 \
			src/core/type_cell_id_3d.f90 \
			src/core/type_photon.f90
			src/grid/grid_geometry_cartesian_3d.f90 \
			src/main/test.f90

car_serial:	$(OBJECTS_CAR_SER)
		$(FC) $(OBJECTS_CAR_SER) -o bin/hyperion_car



install:	bin/hyperion_*
		mkdir -p @prefix@/bin
		cp bin/hyperion_* @prefix@/bin/

clean:;		rm *.mod src/*.mod src/*/*.mod *.o */*.o bin/* *~ */*~ fort.* ; echo "This file can be deleted." > bin/empty.txt ; echo "This file can be deleted." > src/modules/empty.txt
